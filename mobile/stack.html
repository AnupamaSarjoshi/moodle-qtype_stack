<section ion-list *ngIf="question.text || question.text === ''" class="qtype-stack">
    <ion-item text-wrap>
        <p>
            <container-element id="{{question.divId}}" class="ion-text-wrap answer" *ngFor="let section of question.sections">
                <container-element [ngSwitch]="section.type">
                    <core-format-text *ngSwitchCase="'Text'" [component]="component" [componentId]="componentId" [text]="section.content" [contextLevel]="contextLevel"
                            [contextInstanceId]="contextInstanceId" [courseId]="courseId" />
                    <container-element *ngSwitchCase="'Checkbox'">
                        <ng-container *ngTemplateOutlet="checkbox; context:{ $implicit: section, idx: i }"></ng-container>
                    </container-element>

                    <core-format-text *ngSwitchDefault [component]="component" [componentId]="componentId" [text]="section.content" [contextLevel]="contextLevel"
                            [contextInstanceId]="contextInstanceId" [courseId]="courseId" />
                </container-element>

            </container-element>

        </p>
        <p *ngIf="question.prompt">
            <core-format-text [component]="component" [componentId]="componentId" [text]="question.prompt" [contextLevel]="contextLevel"
                    [contextInstanceId]="contextInstanceId" [courseId]="courseId" />
        </p>
    </ion-item>
</section>



<ng-template #checkbox let-section>
    <ion-item class="ion-text-wrap answer" *ngFor="let option of section.options">
        <div class="flex-column">
            <ion-checkbox [attr.name]="option.name" [(ngModel)]="option.checked" [disabled]="option.disabled">
                <div class="flex-grow ion-text-wrap">
                    <div [class]="option.class">
                        <core-format-text [component]="component" [componentId]="componentId" [text]="option.text"
                            [contextLevel]="contextLevel" [contextInstanceId]="contextInstanceId" [courseId]="courseId" />
                    </div>
                </div>
            </ion-checkbox>
        </div>
        <!-- ion-checkbox doesn't use an input. Create a hidden input to hold the value. -->
        <!-- @TODO Check if this is still needed -->
        <input type="hidden" [ngModel]="option.checked" [attr.name]="option.name">
    </ion-item>
</ng-template>
