/**
 * A javascript module to handle requests for library question info.
 *
 * @module     qtype_stack/input
 * @copyright  2018 The Open University
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("qtype_stack/library",["core/ajax","core_filters/events"],(function(Ajax,CustomEvents){let categoryId=null,libraryDiv=null,currentPath=null;function libraryRender(e){const filepath=e.target.getAttribute("data-filepath");currentPath=filepath,libraryDiv.classList.add("loading"),Ajax.call([{methodname:"qtype_stack_library_render",args:{category:categoryId,filepath:filepath},done:function(response){libraryDiv.classList.remove("loading"),function(response){libraryDiv.innerHTML=response.questionrender,CustomEvents.notifyFilterContentUpdated(libraryDiv)}(response)},fail:function(response){libraryDiv.classList.remove("loading"),function(response){libraryDiv.innerHTML="Something went wrong. "+JSON.stringify(response)}(response)}}])}return{setup:function(cId,lDiv){categoryId=cId,libraryDiv=document.getElementById(lDiv),document.querySelectorAll(".library-file-link").forEach((function(elem){elem.addEventListener("click",libraryRender)})),document.querySelector(".library-import-link").addEventListener("click",libraryImport)}};function libraryImport(e){if(!currentPath)return;const filepath=currentPath;libraryDiv.classList.add("loading"),Ajax.call([{methodname:"qtype_stack_library_import",args:{category:categoryId,filepath:filepath},done:function(response){console.log("Success")},fail:function(response){console.log("Failure")}}])}}));

//# sourceMappingURL=library.min.js.map