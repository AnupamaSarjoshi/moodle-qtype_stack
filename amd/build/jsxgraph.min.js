define(["qtype_stack/jsxgraphcore-lazy","core/yui"],function(JXG,Y){return{init:function(divid,code){null!==document.getElementById(divid)&&Y.use("mathjax",function(){function stack_bind_jxg_point(a,b){var c=document.getElementById(a);if(c.value&&""!=c.value){var d=JSON.parse(c.value);try{b.setPosition(JXG.COORDS_BY_USER,d)}catch(e){}b.board.update(),b.update()}var f=b.X(),g=b.Y();b.board.on("update",function(){if(f!=b.X()||g!=b.Y()){var a=JSON.stringify([b.X(),b.Y()]);if(f=!1,g=!1,c.value!=a){c.value=a;var d=new Event("change");c.dispatchEvent(d)}}});var h=JSON.stringify([b.X(),b.Y()]);c.addEventListener("input",function(a){if(c.value!=h){try{var d=JSON.parse(c.value);"number"==typeof d[0]&&"number"==typeof d[1]&&(b.setPosition(JXG.COORDS_BY_USER,d),b.board.update(),b.update())}catch(e){}h=c.value}}),c.addEventListener("change",function(a){if(c.value!=h){try{var d=JSON.parse(c.value);"number"==typeof d[0]&&"number"==typeof d[1]&&(b.setPosition(JXG.COORDS_BY_USER,d),b.board.update(),b.update())}catch(e){}h=c.value}})}function stack_bind_jxg_slider(a,b){var c=document.getElementById(a);if(c.value&&""!=c.value){try{b.setValue(JSON.parse(c.value))}catch(d){}b.board.update(),b.update()}var e=b.Value();b.board.on("update",function(){if(e!=b.Value()){var a=JSON.stringify(b.Value());if(e=!1,c.value!=a){c.value=a;var d=new Event("change");c.dispatchEvent(d)}}});var f=JSON.stringify(b.Value());c.addEventListener("input",function(a){if(c.value!=f){try{var d=JSON.parse(c.value);"number"==typeof d&&(b.setValue(d),b.board.update(),b.update())}catch(e){}f=c.value}}),c.addEventListener("change",function(a){if(c.value!=f){try{var d=JSON.parse(c.value);"number"==typeof d&&(b.setValue(d),b.board.update(),b.update())}catch(e){}f=c.value}})}eval(code)})}}});