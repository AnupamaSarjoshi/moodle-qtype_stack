"use strict";var{keys:cC}=Object,A=a=>typeof a=='string',b={},c={},d={},_=[],f={},g={},h=!1,s={define_group:function(aL){var l=[];for(var i=0;i<aL.length;i++)l.indexOf(aL[i].id)==-1&&l.push(aL[i].id);_.push(l)},starts_moved:function(aM){if(aM.id in f){for(var i=0;i<f[aM.id].length;i++)d[f[aM.id][i]]=null;p(aM)}},clear_initial:function(aN){if(aN.id in f)for(var i=0;i<f[aN.id].length;i++)d[f[aN.id][i]]=null},custom_bind:function(aO,aP,aQ,aR,_E){B(aO);d[aO]=aP();var _F=document.getElementById(aO);_F.value&&_F.value!=''&&aQ(_F.value);c[aO].push(aQ);for(var i=0;i<aR.length;i++)this.register_object(aO,aR[i],aP,_E)},register_object:function(aS,aT,aU,aV){aT.id in f?!(aS in f[aT.id])&&f[aT.id].push(aS):f[aT.id]=[aS];!(aS in b)&&B(aS);b[aS][aT.id]=aU;j(aT,aV)},bind_point:function(aW,aX){this.custom_bind(aW,(()=>k(aX)),(aY=>L(aX,aY)),[aX])},bind_point_dual:function(aZ,bA,bB){this.custom_bind(aZ,(()=>JSON.stringify([[bA.X(),bA.Y()],[bB.X(),bB.Y()]])),(bC=>{var bD=JSON.parse(bC);m(bA,bD[0]);m(bB,bD[1])}),[bA,bB])},bind_point_relative:function(bE,bF,bG){this.custom_bind(bE,(()=>JSON.stringify([[bF.X(),bF.Y()],[bG.X()-bF.X(),bG.Y()-bF.Y()]])),(bH=>{var bI=JSON.parse(bH);m(bF,bI[0]);bI[1][0]=bI[1][0]+bI[0][0];bI[1][1]=bI[1][1]+bI[0][1];m(bG,bI[1])}),[bF,bG])},bind_point_direction:function(bJ,bK,bL){this.custom_bind(bJ,(()=>JSON.stringify([[bK.X(),bK.Y()],[Math.atan2(bL.Y()-bK.Y(),bL.X()-bK.X()),Math.sqrt((bL.X()-bK.X())*(bL.X()-bK.X())+(bL.Y()-bK.Y())*(bL.Y()-bK.Y()))]])),(bM=>{var bN=JSON.parse(bM),bO=bN[1][0],bP=bN[1][1];m(bK,bN[0]);bN[1][0]=bN[0][0]+bP*Math.cos(bO);bN[1][1]=bN[0][1]+bP*Math.sin(bO);m(bL,bN[1])}),[bK,bL])},bind_slider:function(bQ,bR){this.custom_bind(bQ,(()=>n(bR)),(bS=>o(bR,bS)),[bR])},bind_list_of:function(bT,bU){this.custom_bind(bT,(()=>{var r='[';for(var i=0;i<bU.length;i++){var bV=bU[i];bV.getType()=='slider'?r=r+JSON.stringify(bV.Value())+',':r=r+k(bV)+','}r=r.substring(0,r.length-1);return`${r}]`}),(bW=>{var bX=JSON.parse(bW);for(var i=0;(i<bU.length&&i<bX.length);i++){var bY=bU[i];bY.getType()=='slider'?bY.setValue(bX[i]):m(bY,bX[i])}}),bU)},stack2jsxgraph:function(bZ){var t;t=bZ.replaceAll('%pi','PI').replaceAll('%e','EULER').replaceAll('%phi','1.618033988749895').replaceAll('%gamma','0.5772156649015329').trim();t[0]=='['&&t[t.length-1]==']'&&(t=t.slice(1,-1).split(/\s*,\s*/));return t}};function B(C){if(!(C in b)){b[C]={};c[C]=[];var _b=document.getElementById(C);_b.addEventListener('input',()=>R(C));_b.addEventListener('change',()=>R(C))}}function j(_a,D){D==void 0?D=['update']:A(D)||D instanceof String&&(D=[D]);for(const _A of D){!(_A in g)&&(g[_A]={});!(_a.id in g[_A])&&(_a.board.on(_A,()=>q(_a.id)),g[_A][_a.id]=_a)}}function k(E){return JSON.stringify([E.X(),E.Y()])}function L(aA,_B){try {var _c=JSON.parse(_B);typeof _c[0]=='number'&&typeof _c[1]=='number'&&(aA.setPosition(JXG.COORDS_BY_USER,_c),aA.board.update(),aA.update())} catch {}}function m(aB,aC){try {typeof aC[0]=='number'&&typeof aC[1]=='number'&&(aB.setPosition(JXG.COORDS_BY_USER,aC),aB.board.update(),aB.update())} catch {}}function n(aD){return JSON.stringify(aD.Value())}function o(aE,aF){try {aE.setValue(JSON.parse(aF));aE.board.update();aE.update()} catch {}}function p(aG){q(aG.id)}function q(aH){if(!h){h=!0;try {var aI=[];if(aH in f)for(var i=0;i<f[aH].length;i++){var _d=f[aH][i];if(aI.indexOf(_d)==-1){aI.push(_d);var _e=document.getElementById(_d),F=b[_d][aH]();if(F!==d[_d]){d[_d]=null;_e.value=F}else{h=!1;return}}}for(var G=0;G<_.length;G++){var H=_[G];if(H.indexOf(aH)!==-1)for(var I=0;I<H.length;I++){var J=H[I];if(J!==aH&&J in f)for(var i=0;i<f[J].length;i++){var _d=f[J][i];if(aI.indexOf(_d)==-1){d[_d]=null;aI.push(_d);var _e=document.getElementById(_d);_e.value=b[_d][J]()}}}}for(var i=0;i<aI.length;i++){var _e=document.getElementById(aI[i]);var e=new Event('change');_e.dispatchEvent(e)}} catch {}h=!1}}function R(aJ){if(aJ in c){var aK=document.getElementById(aJ),_C=cC(b[aJ]),_D=!1;for(var i=0;i<_C.length;i++){var _f=b[aJ][_C[i]]();_f!==aK.value&&(_D=!0,i=_C.length+1)}if(_D)for(var i=0;i<c[aJ].length;i++)c[aJ][i](aK.value)}}export{s as stack_jxg};export default s;
